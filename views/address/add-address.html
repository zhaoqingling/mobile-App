<!Doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
<meta name="format-detection" content="telephone=no,address=no">
<title>新增收货地址</title>
<link rel="stylesheet" type="text/css" href="../../static/css/base.css"/>
<script src="../../static/js/common/root-font-size.js"></script>
</head>
<body>
	<section class="header">
		<a href="./my-address.html" class="prev"></a>
		<h2 class="title">新增收货地址</h2>
	</section>
	<section class="add-address">
		<form action="#">
			<section class="group">
				<input type="text" placeholder="收货人姓名" input1/>
				<p class="warning">请输入收货人姓名</p>
			</section>
			<section class="group">
				<input type="text" placeholder="收货人手机号码" input2/>
				<p class="warning">请输入收货人手机号码</p>
			</section>
			<section class="group" choose-city>
				<span class="select-city" select-city>请选择城市</span>
				<p class="warning">请选择城市</p>
			</section>
			<section class="group">
				<input type="text" placeholder="请输入您的详细地址" input4/>
				<p class="warning">请输入详细地址</p>
			</section>
			<section class="group">
				<input type="text" placeholder="邮政编码(选填)"/>
			</section>
			<section class="group">
				<span class="default">设为默认地址</span>
				<span class="circle" default><i></i></span>
			</section>
		</form>
		<p class="btn"><a class="btn-save disable" btn-save>保存并使用</a></p>
		<p class="btn"><a href="./my-address.html" class="back" back>返回</a></p>
	</section>
</body>
</html>
<script type="text/javascript" src="../../static/js/module/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="../../static/js/libs/jquery.cityPicker.js"></script>
<script type="text/javascript" src="../../static/js/libs/city.data.js"></script>
<script type="text/javascript">
$(function(){

	/*返回首页点击效果*/
	$(document).on({

		touchstart:function(){
			//active点击
		}	
	},'[back]');	

	/*点击设为默认地址*/
	$(document).on('tap','[default]',function(){
		if(!$(this).hasClass('on')){
			$(this).addClass('on');
		}else{
			$(this).removeClass('on');
		}
	});

	/*选择城市*/
	$('[choose-city]').cityPicker({
		data:cityData,
		okFn:function(items){
			var len = items.length,
				html = '';

			for(var i=0;i<len;i++){
				html += items[i]['text'] + ' ';
			}

			$('[select-city]').html(html);
		}
	});

	/*表单验证*/
	$(document).on({

		focus:function(){
			$(this).siblings('.warning').hide();
		},
		blur:function(){
			var val = $(this).val();
			if(val == ''){
				$(this).siblings('.warning').show();
			}else{
				$(this).siblings('.warning').hide();
			}	
		}

	},'input');

	$('input').each(function(){
		var _this = $(this);
		$(document).on('tap','[btn-save]',function(){
			if(_this.val()==''){
				_this.siblings('.warning').show();
			}
			if($('[select-city]').text() == '请选择城市'){
				$('[select-city]').siblings('.warning').show();
			}
			
		});
	});

	$(document).on('keyup','input',function(){
		var txt3 = $('[select-city]').text();
		if(txt3 == '请选择城市'){
			$('[btn-save]').addClass('disable');
		}else{
			yanzheng();
		}
	});

	$(document).on('tap','[name="btn-confirm"]',function(){
		$('[select-city]').siblings('.warning').hide();
		var txt3 = $('[select-city]').text();
		if(txt3 !='请选择城市'){
			var txt1 = $('[input1]').val(),
		 		txt2 = $('[input2]').val(),
				txt4 = $('[input4]').val();
			if(txt1 == '' || txt2 == '' || txt4 ==''){
				$('[btn-save]').addClass('disable');
			}else{
				$('[btn-save]').removeClass('disable');
			}	
		}
	});

	function yanzheng(){
		var txt1 = $('[input1]').val(),
	 		txt2 = $('[input2]').val(),
			txt4 = $('[input4]').val();
		if(txt1 == '' || txt2 == '' || txt4 ==''){
			$('[btn-save]').addClass('disable');
		}else{
			if($('[select-city]').text() !='请选择城市'){
				$('[btn-save]').removeClass('disable');
			}
		}
	}
});
</script>